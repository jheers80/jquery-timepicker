{"version":3,"sources":["timepicker.js"],"names":["root","factory","define","amd","exports","module","require","$","jQuery","this","twobit","num","regTime","timepicker","nullFun","hourStr","Array","fill","map","t","i","val","join","minuteStr","content","find","attr","title","choseAll","choseMinute","choseHour","hourShow","minuteShow","update","inputTarget","hour","minute","text","$timepickerUpdate","bindEvent","thisTimePicker","hasBind","on","getAttribute","hide","show","e","stopPropagation","fn","option","timepickerObj","$body","length","each","nodeName","off","value","test","split","Date","getHours","getMinutes","left","offsetLeft","top","offsetTop","offsetHeight","appendTo","offsetParent","css","one","remove","fun","isFunction"],"mappings":"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","file":"../js/timepicker.min.js","sourcesContent":["/*!\n * @todo 日期选择器  \n * @author wanhappy@163.com\n * 使用方法 $('input').timepicker(); \n**/\n ;(function(root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    define(['jquery'], factory);\n  } else if (typeof exports === 'object') {\n    module.exports = factory(require('jquery'));\n  } else {\n    root.$ = factory(root.jQuery);\n  }\n}(this, function($) {\n\n'use strict';\n\n// 单个位数前加0  \nvar twobit = function( num ) {\n\treturn num >= 10 ? num + '' : '0' + num;\n};\n// 检测时间是否符合要求\nvar regTime = /^[0-9]{1,2}:[0-9]{1,2}$/;\nvar timepicker = {};\n\n// 空函数\nvar nullFun = function () {};\n\n// 小时\nvar hourStr = new Array( 24 ).fill( null ).map(function(t,i){\n\tvar val = twobit( i ); \n\treturn '<li class=\"cell-2 js-hour-cell\" data-val=\"' + val + '\">' + val + '</li>';\n}).join('');\n\n// 分钟\nvar minuteStr = new Array( 12 ).fill( null ).map(function(t,i){\n\tvar val = twobit( i *5 ); \n\treturn  '<li class=\"cell-2 js-minute-cell\" data-val=\"' + val + '\">' + val + '</li>';\n}).join('');\n\nvar content = $('<div class=\"timepicker\"><div v-show class=\"title\">请选择</div><div class='+\n\t\t\t'\"chose-all\"><div class=\"handle\"><div class=\"cell-4\"><a class=\"icon icon-angle-up icon-2x '+\n\t\t\t'js-plus-houer\"></a></div><div class=\"cell-2\"></div><div class=\"cell-4\"><a class=\"icon icon-angle-up '+\n\t\t\t'icon-2x js-plus-minute\"></a></div></div><div class=\"text\"><div class=\"cell-4\"><a class=\"js-hour-show\" '+\n\t\t\t'title=\"选择时\"></a></div><div class=\"cell-2\">:</div><div class=\"cell-4\"><a class=\"js-minute-show\" title=\"选择分\">'+\n\t\t\t'</a></div></div><div class=\"handle\"><div class=\"cell-4\"><a class=\"icon icon-angle-down icon-2x js-minus-houer\"></a>'+\n\t\t\t'</div><div class=\"cell-2\"></div><div class=\"cell-4\"><a class=\"icon icon-angle-down icon-2x js-minus-minute\"></a></div>'+\n\t\t\t'</div></div><div class=\"chose-hour\"><ul class=\"handle\">' + hourStr + '</ul></div><div class=\"chose-minute\"><ul class=\"handle\">' + \n\t\t\tminuteStr + '</ul></div></div></div>');\ncontent.find('a').attr('href','javascript:void(0);');\ntimepicker.content = content;\ntimepicker.title = content.find('.title');\ntimepicker.choseAll = content.find('.chose-all');\ntimepicker.choseMinute = content.find('.chose-minute');\ntimepicker.choseHour = content.find('.chose-hour');\ntimepicker.hourShow = content.find('.js-hour-show');\ntimepicker.minuteShow = content.find('.js-minute-show');\n\n// 更新时间\ntimepicker.update = function () {\n\tthis.inputTarget.val( twobit( this.hour ) + ':' + twobit( this.minute ) );\n\tthis.minuteShow.text( twobit( this.minute ) );\n\tthis.hourShow.text( twobit( this.hour ) );\n\tthis.inputTarget.$timepickerUpdate();\n\treturn this;\n};\n\n// 事件绑定\ntimepicker.bindEvent = function () {\n\tvar thisTimePicker = this;\n\tif( thisTimePicker.hasBind ) return;\n\tthisTimePicker.hasBind = true;\n\t// 分钟--\n\tthis.content.on('click','.js-minus-minute',function() {\n\t\tvar minute = thisTimePicker.minute;\n\t\tif( minute <= 0 ){\n\t\t\tthisTimePicker.minute = 59;\n\t\t} else {\n\t\t\tthisTimePicker.minute--;\n\t\t}\n\t\tthisTimePicker.update();\n\t\n\t// 分钟++\n\t}).on('click','.js-plus-minute',function() {\n\t\tvar minute = thisTimePicker.minute;\n\t\tif( minute >= 59 ){\n\t\t\tthisTimePicker.minute = 0;\n\t\t} else {\n\t\t\tthisTimePicker.minute++;\n\t\t}\n\n\t\tthisTimePicker.update();\n\t// \n\t// 小时++\n\t}).on('click','.js-plus-houer',function() {\n\t\tvar hour = thisTimePicker.hour;\n\t\tif( hour >= 23 ){\n\t\t\tthisTimePicker.hour = 0;\n\t\t} else {\n\t\t\tthisTimePicker.hour++;\n\t\t}\n\t\tthisTimePicker.update();\n\t\n\t// 小时--\n\t}).on('click','.js-minus-houer',function() {\n\t\tvar hour = thisTimePicker.hour;\n\t\tif( hour <= 0 ){\n\t\t\tthisTimePicker.hour = 23;\n\t\t} else {\n\t\t\tthisTimePicker.hour--;\n\t\t}\n\t\tthisTimePicker.update();\n\t\n\t// 选择分钟\n\t}).on('click','.js-minute-cell',function () {\n\t\tthisTimePicker.minute = +this.getAttribute('data-val');\n\t\tthisTimePicker.update();\n\t\tthisTimePicker.choseMinute.hide();\n\t\tthisTimePicker.choseAll.show();\n\t\tthisTimePicker.title.text('请选择');\n\t\n\t// 选择小时\n\t}).on('click','.js-hour-cell',function () {\n\t\tthisTimePicker.hour = +this.getAttribute('data-val');\n\t\tthisTimePicker.update();\n\t\tthisTimePicker.choseHour.hide();\n\t\tthisTimePicker.choseAll.show();\n\t\tthisTimePicker.title.text('请选择');\n\t// 阻止冒泡\n\t}).on('click',function(e) {\n\t\te.stopPropagation();\n\t});\n\n\t// 切换到选择小时\n\tthisTimePicker.hourShow.on('click',function() {\n\t\tthisTimePicker.choseAll.hide();\n\t\tthisTimePicker.choseHour.show();\n\t\tthisTimePicker.title.text('请选择小时');\n\t});\n\n\t// 切换到选择分钟\n\tthisTimePicker.minuteShow.on('click',function() {\n\t\tthisTimePicker.choseAll.hide();\n\t\tthisTimePicker.choseMinute.show();\n\t\tthisTimePicker.title.text('请选择分钟');\n\t});\n};\n\n// 将时间选择对象挂载到$上\n$.timepicker = timepicker;\n\n// 为jquery增加timepicket功能\n$.fn.timepicker = function( option ) {\n\tvar t = this;\n\tvar hour;\n\tvar minute;\n\tvar timepickerObj = $.timepicker;\n\tvar $body = $('body');\n\tif( t.length > 1 || !t.length ){\n\t\tt.each(function() {\n\t\t\t$( this ).timepicker();\n\t\t});\n\t\treturn t;\n\t}\n\t// 元素应该是input\n\tif( !this[0].nodeName || this[0].nodeName !== 'INPUT' ){\n\t\treturn;\n\t}\n\t// 防止报错\n\tthis.$timepickerUpdate = nullFun;\n\t\n\t// 事件绑定\n\tthis.off('click').on('click',function(e) {\n\t\tvar val = this.value;\n\t\tif( regTime.test( val ) ){\n\t\t\tval = val.split(':');\n\t\t\thour = +val[0];\n\t\t\tminute = +val[1];\n\t\t} else {\n\t\t\tval = new Date();\n\t\t\thour = val.getHours();\n\t\t\tminute = val.getMinutes();\n\t\t}\n\t\tvar left = this.offsetLeft + 'px';\n\t\tvar top = ( this.offsetTop + this.offsetHeight ) + 'px';\n\t\t\n\t\ttimepickerObj.inputTarget = t;\n\t\ttimepickerObj.content.appendTo( this.offsetParent ).css( { left : left, top : top } );\n\t\ttimepickerObj.hour = hour;\n\t\ttimepickerObj.minute = minute;\n\t\ttimepickerObj.choseAll.show();\n\t\ttimepickerObj.choseHour.hide();\n\t\ttimepickerObj.choseMinute.hide();\n\t\ttimepickerObj.update();\n\t\t$.timepicker.bindEvent();\n\t\te.stopPropagation();\n\t\t$body.one('click',function() {\n\t\t\ttimepickerObj.content.off().remove();\n\t\t\ttimepickerObj.hasBind = false;\n\t\t});\n\t});\n\tthis.off('keydown').on('keydown',function() {\n\t\treturn false;\n\t});\n\tthis.update = function( fun ) {\n\t\tif( $.isFunction( fun ) ) this.$timepickerUpdate = fun;\n\t\telse this.$timepickerUpdate = nullFun;\n\t};\n\treturn this;\n};\n\n\nreturn $;\n}));\n "]}